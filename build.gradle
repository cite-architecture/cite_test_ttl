apply plugin: "base"
apply plugin:  "maven"

if (hasProperty('pub')) {
    System.err.print "Using configuration data from ${pub}"
    File confFile = new File(pub)
    if (! confFile.exists()) {
        throw new Exception("No publication configuration file ${pub} found.")
    } else {
        apply from: pub
    }

} else {
    File confFile = new File("pub.gradle")
    if (! confFile.exists()) {
        throw new Exception("No publication configuration file ${confFile} found\
.")
    } else {
        println "Using default configuration in 'pub.gradle'"
        apply from: "pub.gradle"
    }
}


version = "1.0.0"

configurations {
    testsuite
}

task pkg(type: Zip)  {
    /*classifier = 'schemas'*/
    description = 'Builds zip file of test suite.'
    from(file("testsuite"))
    include("**/*")
    baseName = "cite_test_suite"
}

uploadTestsuite {
    repositories.mavenDeployer {
        repository(url: nexusRepo) {
            authentication (userName: nexusUser, password: nexusPassword)
        }
    }
}
